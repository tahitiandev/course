"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4428],{2957:(z,Z,g)=>{g.d(Z,{G:()=>D});const D={FRONT:"front",BACK:"back"}},2726:(z,Z,g)=>{g.d(Z,{Uw:()=>a,fo:()=>B});var i=g(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var I=function(r){return r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE",r}(I||{});class K extends Error{constructor(e,n,l){super(e),this.message=e,this.code=n,this.data=l}}const m=r=>{var e,n,l,d,s;const y=r.CapacitorCustomPlatform||null,c=r.Capacitor||{},C=c.Plugins=c.Plugins||{},p=r.CapacitorPlatforms,H=(null===(e=null==p?void 0:p.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==y?y.name:(r=>{var e,n;return null!=r&&r.androidBridge?"android":null!==(n=null===(e=null==r?void 0:r.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==n&&n.bridge?"ios":"web"})(r)),ce=(null===(n=null==p?void 0:p.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==H()),ue=(null===(l=null==p?void 0:p.currentPlatform)||void 0===l?void 0:l.isPluginAvailable)||(P=>{const _=N.get(P);return!!(null!=_&&_.platforms.has(H())||te(P))}),te=(null===(d=null==p?void 0:p.currentPlatform)||void 0===d?void 0:d.getPluginHeader)||(P=>{var _;return null===(_=c.PluginHeaders)||void 0===_?void 0:_.find(V=>V.name===P)}),N=new Map,ye=(null===(s=null==p?void 0:p.currentPlatform)||void 0===s?void 0:s.registerPlugin)||((P,_={})=>{const V=N.get(P);if(V)return console.warn(`Capacitor plugin "${P}" already registered. Cannot register plugins twice.`),V.proxy;const j=H(),X=te(P);let $;const me=function(){var w=(0,i.Z)(function*(){return!$&&j in _?$=$="function"==typeof _[j]?yield _[j]():_[j]:null!==y&&!$&&"web"in _&&($=$="function"==typeof _.web?yield _.web():_.web),$});return function(){return w.apply(this,arguments)}}(),q=w=>{let S;const M=(...k)=>{const R=me().then(F=>{const W=((w,S)=>{var M,k;if(!X){if(w)return null===(k=w[S])||void 0===k?void 0:k.bind(w);throw new K(`"${P}" plugin is not implemented on ${j}`,I.Unimplemented)}{const R=null==X?void 0:X.methods.find(F=>S===F.name);if(R)return"promise"===R.rtype?F=>c.nativePromise(P,S.toString(),F):(F,W)=>c.nativeCallback(P,S.toString(),F,W);if(w)return null===(M=w[S])||void 0===M?void 0:M.bind(w)}})(F,w);if(W){const Y=W(...k);return S=null==Y?void 0:Y.remove,Y}throw new K(`"${P}.${w}()" is not implemented on ${j}`,I.Unimplemented)});return"addListener"===w&&(R.remove=(0,i.Z)(function*(){return S()})),R};return M.toString=()=>`${w.toString()}() { [capacitor code] }`,Object.defineProperty(M,"name",{value:w,writable:!1,configurable:!1}),M},ne=q("addListener"),re=q("removeListener"),Pe=(w,S)=>{const M=ne({eventName:w},S),k=function(){var F=(0,i.Z)(function*(){const W=yield M;re({eventName:w,callbackId:W},S)});return function(){return F.apply(this,arguments)}}(),R=new Promise(F=>M.then(()=>F({remove:k})));return R.remove=(0,i.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield k()}),R},ee=new Proxy({},{get(w,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return X?Pe:ne;case"removeListener":return re;default:return q(S)}}});return C[P]=ee,N.set(P,{name:P,proxy:ee,platforms:new Set([...Object.keys(_),...X?[j]:[]])}),ee});return c.convertFileSrc||(c.convertFileSrc=P=>P),c.getPlatform=H,c.handleError=P=>r.console.error(P),c.isNativePlatform=ce,c.isPluginAvailable=ue,c.pluginMethodNoop=(P,_,V)=>Promise.reject(`${V} does not have an implementation of "${_}".`),c.registerPlugin=ye,c.Exception=K,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},A=(r=>r.Capacitor=m(r))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),B=A.registerPlugin;class a{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){var l=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const y=function(){var C=(0,i.Z)(function*(){return l.removeListener(e,n)});return function(){return C.apply(this,arguments)}}(),c=Promise.resolve({remove:y});return Object.defineProperty(c,"remove",{value:(C=(0,i.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield y()}),function(){return C.apply(this,arguments)})}),c;var C}removeAllListeners(){var e=this;return(0,i.Z)(function*(){e.listeners={};for(const n in e.windowListeners)e.removeWindowListener(e.windowListeners[n]);e.windowListeners={}})()}notifyListeners(e,n){const l=this.listeners[e];l&&l.forEach(d=>d(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:l=>{this.notifyListeners(n,l)}}}unimplemented(e="not implemented"){return new A.Exception(e,I.Unimplemented)}unavailable(e="not available"){return new A.Exception(e,I.Unavailable)}removeListener(e,n){var l=this;return(0,i.Z)(function*(){const d=l.listeners[e];if(!d)return;const s=d.indexOf(n);l.listeners[e].splice(s,1),l.listeners[e].length||l.removeWindowListener(l.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const v=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),T=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class O extends a{getCookies(){return(0,i.Z)(function*(){const e=document.cookie,n={};return e.split(";").forEach(l=>{if(l.length<=0)return;let[d,s]=l.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");d=T(d).trim(),s=T(s).trim(),n[d]=s}),n})()}setCookie(e){return(0,i.Z)(function*(){try{const n=v(e.key),l=v(e.value),d=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),y=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${l||""}${d}; path=${s}; ${y};`}catch(n){return Promise.reject(n)}})()}deleteCookie(e){return(0,i.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})()}clearCookies(){return(0,i.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,i.Z)(function*(){try{yield e.clearCookies()}catch(n){return Promise.reject(n)}})()}}B("CapacitorCookies",{web:()=>new O});const ie=function(){var r=(0,i.Z)(function*(e){return new Promise((n,l)=>{const d=new FileReader;d.onload=()=>{const s=d.result;n(s.indexOf(",")>=0?s.split(",")[1]:s)},d.onerror=s=>l(s),d.readAsDataURL(e)})});return function(n){return r.apply(this,arguments)}}();class le extends a{request(e){return(0,i.Z)(function*(){const n=((r,e={})=>{const n=Object.assign({method:r.method||"GET",headers:r.headers},e),d=((r={})=>{const e=Object.keys(r);return Object.keys(r).map(d=>d.toLocaleLowerCase()).reduce((d,s,y)=>(d[s]=r[e[y]],d),{})})(r.headers)["content-type"]||"";if("string"==typeof r.data)n.body=r.data;else if(d.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[y,c]of Object.entries(r.data||{}))s.set(y,c);n.body=s.toString()}else if(d.includes("multipart/form-data")){const s=new FormData;if(r.data instanceof FormData)r.data.forEach((c,C)=>{s.append(C,c)});else for(const c of Object.keys(r.data))s.append(c,r.data[c]);n.body=s;const y=new Headers(n.headers);y.delete("content-type"),n.headers=y}else(d.includes("application/json")||"object"==typeof r.data)&&(n.body=JSON.stringify(r.data));return n})(e,e.webFetchExtra),l=((r,e=!0)=>r?Object.entries(r).reduce((l,d)=>{const[s,y]=d;let c,C;return Array.isArray(y)?(C="",y.forEach(p=>{c=e?encodeURIComponent(p):p,C+=`${s}=${c}&`}),C.slice(0,-1)):(c=e?encodeURIComponent(y):y,C=`${s}=${c}`),`${l}&${C}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),d=l?`${e.url}?${l}`:e.url,s=yield fetch(d,n),y=s.headers.get("content-type")||"";let C,p,{responseType:c="text"}=s.ok?e:{};switch(y.includes("application/json")&&(c="json"),c){case"arraybuffer":case"blob":p=yield s.blob(),C=yield ie(p);break;case"json":C=yield s.json();break;default:C=yield s.text()}const J={};return s.headers.forEach((H,Q)=>{J[Q]=H}),{data:C,headers:J,status:s.status,url:s.url}})()}get(e){var n=this;return(0,i.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var n=this;return(0,i.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var n=this;return(0,i.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var n=this;return(0,i.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var n=this;return(0,i.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}B("CapacitorHttp",{web:()=>new le})},9825:(z,Z,g)=>{g.d(Z,{f:()=>i});var i=function(h){return h.POST="POST",h.PUT="PUT",h.DELETE="DELETE",h}(i||{})},5512:(z,Z,g)=>{g.d(Z,{J:()=>x});var i=g(5861),h=g(3009),D=g(6689),L=g(5423),G=g(6815);let x=(()=>{var b;class I{constructor(f,m){this.storage=f,this.utility=m}get(){var f=this;return(0,i.Z)(function*(){return f.orderByFamille(yield f.storage.get(h.K.Articles))})()}post(f){var m=this;return(0,i.Z)(function*(){yield m.storage.post(h.K.Articles,f)})()}put(f){var m=this;return(0,i.Z)(function*(){yield m.storage.put(h.K.Articles,f)})()}delete(f){var m=this;return(0,i.Z)(function*(){yield m.storage.delete(h.K.Articles,f)})()}deleteDefinitivement(f){var m=this;return(0,i.Z)(function*(){yield m.storage.deleteDefinitivement(h.K.Articles,f)})()}getArticleById(f){var m=this;return(0,i.Z)(function*(){return(yield m.get()).filter(A=>A.id==f)})()}getArticleByCodeBarre(f){var m=this;return(0,i.Z)(function*(){return(yield m.get()).filter(A=>A.codeBarre==f)})()}orderByFamille(f){return f.sort((m,E)=>m.familleId<E.familleId?-1:1)}}return(b=I).\u0275fac=function(f){return new(f||b)(D.LFG(L.V),D.LFG(G.t))},b.\u0275prov=D.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),I})()},1934:(z,Z,g)=>{g.d(Z,{k:()=>x});var i=g(5861),h=g(2726);g(2957);const L=(0,h.fo)("BarcodeScanner",{web:()=>g.e(7606).then(g.bind(g,7606)).then(b=>new b.BarcodeScannerWeb)});var G=g(6689);let x=(()=>{var b;class I{constructor(){}checkPermission(){return(0,i.Z)(function*(){try{return!!(yield L.checkPermission({force:!0})).granted}catch(f){return f}})()}STEP1EnableCameraReturnVisility(){var f=this;return(0,i.Z)(function*(){var m;return(yield f.checkPermission())?(yield L.hideBackground(),null===(m=document.querySelector("body"))||void 0===m||m.classList.add("scanner-active"),"hidden"):""})()}STEP2ScanneBarCodeAndReturnContent(){return(0,i.Z)(function*(){return(yield L.startScan()).content})()}STEP3disableCameraReturnVisility(){var f;return L.showBackground(),L.stopScan(),null===(f=document.querySelector("body"))||void 0===f||f.classList.remove("scanner-active"),""}}return(b=I).\u0275fac=function(f){return new(f||b)},b.\u0275prov=G.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),I})()},5423:(z,Z,g)=>{g.d(Z,{V:()=>m});var i=g(5861),h=g(3009),D=g(9825),L=g(6689),G=g(2014),x=g(2386),b=g(9392),I=g(3182),K=g(553);let f=(()=>{var E;class A{constructor(t){this.firestore=t}post(t,o,a){return(0,i.Z)(function*(){const u=(0,I.ZF)(K.N.firebaseConfig),v=(0,b.ad)(u);yield(0,x.pl)((0,x.JU)(v,t,a),o)})()}getAll(t){var o=this;return(0,i.Z)(function*(){const a=yield(0,x.hJ)(o.firestore,t);return(0,x.BS)(a)})()}put(t,o,a){var u=this;return(0,i.Z)(function*(){const v=(0,x.JU)(u.firestore,t+"/"+o);return(0,x.r7)(v,a)})()}delete(t,o,a){var u=this;return(0,i.Z)(function*(){const v=(0,x.JU)(u.firestore,t+"/"+o);return(0,x.oe)(v)})()}}return(E=A).\u0275fac=function(t){return new(t||E)(L.LFG(x.gg))},E.\u0275prov=L.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),A})(),m=(()=>{var E;class A{constructor(t,o){this.storage=t,this.firestore=o}postAll(t,o){var a=this;return(0,i.Z)(function*(){(yield a.getConnexionInfo()).isOnline&&(yield(yield o.filter(T=>!T.isFirebase)).map(function(){var T=(0,i.Z)(function*(O){O.isFirebase=!0,yield a.firestore.post(t,O,O.id.toString())});return function(O){return T.apply(this,arguments)}}())),yield a.storage.set(t,o)})()}parseDate(t){const a=new Date(t).getTime();return{nanoseconds:a%1e3*1e6,seconds:Math.floor(a/1e3)}}post(t,o){var a=this;return(0,i.Z)(function*(){var u=yield a.getAll(t);o.id=Number(new Date),o.createdOn=a.parseDate(new Date),o.modifiedOn=null,o.deletedOn=null,o.isFirebase=!1,u.push(o),yield a.postAll(t,u)})()}get(t){var o=this;return(0,i.Z)(function*(){return yield(yield o.storage.get(t)).filter(u=>""===u.deletedOn||null===u.deletedOn||void 0!==u.deletedOn)})()}getAll(t){var o=this;return(0,i.Z)(function*(){return yield o.storage.get(t)})()}getIndex(t,o){var a=this;return(0,i.Z)(function*(){return yield(yield a.getAll(t)).findIndex(v=>v.id===o)})()}put(t,o){var a=this;return(0,i.Z)(function*(){const u=yield a.getAll(t),v=yield a.getIndex(t,o.id);u[v]=o,u[v].modifiedOn=new Date,(yield a.getConnexionInfo()).isOnline?yield a.firestore.put(t,o.id.toString(),o):u[v].isFirebase&&(u[v].firebaseMethod=D.f.PUT),yield a.postAll(t,u)})()}delete(t,o){var a=this;return(0,i.Z)(function*(){const u=yield a.getAll(t),v=yield a.getIndex(t,o.id);u[v].deletedOn=new Date,u[v].firebaseMethod=D.f.DELETE,yield a.postAll(t,u),(yield a.getConnexionInfo()).isOnline&&(yield a.firestore.put(t,o.id.toString(),o))})()}deleteDefinitivement(t,o){var a=this;return(0,i.Z)(function*(){const u=yield a.getAll(t),v=yield a.getIndex(t,o.id);(yield a.getConnexionInfo()).isOnline?(u.splice(v,1),yield a.firestore.delete(t,o.id.toString(),o)):u[v].isFirebase?(u[v].firebaseMethod=D.f.DELETE,u[v].deletedOn=new Date):u.splice(v,1),yield a.postAll(t,u)})()}synchroniserAvecFirestore(){var t=this;return(0,i.Z)(function*(){(yield t.getConnexionInfo()).isOnline?(yield t.synchroniser(h.K.Utilisateurs),yield t.synchroniser(h.K.Articles),yield t.synchroniser(h.K.Courses),yield t.synchroniser(h.K.Familles),yield t.synchroniser(h.K.CourseDetails),yield t.synchroniser(h.K.Memos),yield t.synchroniser(h.K.HistoriquePrix),yield t.synchroniser(h.K.Depenses),yield t.synchroniser(h.K.Apports),yield t.synchroniser(h.K.Epargnes),yield t.synchroniser(h.K.Magasins),yield t.synchroniser(h.K.Plats),yield t.synchroniser(h.K.PlatDetails),yield t.synchroniser(h.K.Groupes),yield t.synchroniser(h.K.Menus),yield t.synchroniser(h.K.Budget)):alert("Le mode onLine est d\xe9sactiv\xe9")})()}synchroniser(t){var o=this;return(0,i.Z)(function*(){if((yield o.getConnexionInfo()).isOnline){const u=yield o.storage.get(t),v=yield u.filter(O=>!O.isFirebase);v.length>0&&v.map(function(){var O=(0,i.Z)(function*(U){U.isFirebase=!0,yield o.firestore.post(t,U,U.id.toString())});return function(U){return O.apply(this,arguments)}}());const T=yield u.filter(O=>O.firebaseMethod===D.f.DELETE||O.firebaseMethod===D.f.PUT);T.length>0&&T.map(function(){var O=(0,i.Z)(function*(U){U.firebaseMethod===D.f.PUT&&(yield o.put(t,U)),U.firebaseMethod===D.f.DELETE&&(yield o.deleteDefinitivement(t,U))});return function(U){return O.apply(this,arguments)}}()),(yield o.firestore.getAll(t)).subscribe(O=>{o.storage.set(t,O)})}else alert("Le mode onLine est d\xe9sactiv\xe9")})()}set(t,o){var a=this;return(0,i.Z)(function*(){yield a.storage.set(t,o)})()}getConnexionInfo(){var t=this;return(0,i.Z)(function*(){return yield t.storage.get(h.K.InfoConnexion)})()}}return(E=A).\u0275fac=function(t){return new(t||E)(L.LFG(G.K),L.LFG(f))},E.\u0275prov=L.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),A})()}}]);