"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6850],{6850:(M,m,d)=>{d.r(m),d.d(m,{DepensesPageModule:()=>s});var a=d(6814),u=d(95),c=d(7027),v=d(9801),g=d(5861),p=d(3009),T=d(9825),t=d(6689),I=d(5423);let b=(()=>{var n;class r{constructor(i){this.storage=i}get(){var i=this;return(0,g.Z)(function*(){return yield i.storage.get(p.K.Depenses)})()}post(i){var l=this;return(0,g.Z)(function*(){yield l.storage.post(p.K.Depenses,i)})()}delete(i){var l=this;return(0,g.Z)(function*(){yield l.storage.deleteDefinitivement(p.K.Depenses,i)})()}put(i){var l=this;return(0,g.Z)(function*(){yield l.storage.put(p.K.Depenses,i)})()}}return(n=r).\u0275fac=function(i){return new(i||n)(t.LFG(I.V))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();var F=d(6815);function y(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"ion-item-sliding")(1,"ion-item",8),t.NdJ("click",function(){const f=t.CHM(o).$implicit,h=t.oxw();return t.KtG(h.put(f))}),t.TgZ(2,"ion-label")(3,"h3"),t._uU(4),t.ALo(5,"date"),t.TgZ(6,"ion-chip",9),t._uU(7),t.qZA()()()(),t.TgZ(8,"ion-item-options",10)(9,"ion-item-option",11),t.NdJ("click",function(){const f=t.CHM(o).$implicit,h=t.oxw();return t.KtG(h.delete(f))}),t._uU(10," Supprimer "),t.qZA()()()}if(2&n){const o=r.$implicit;t.xp6(1),t.Q6J("disabled","DELETE"===o.firebaseMethod),t.xp6(3),t.AsE(" ",t.xi3(5,4,o.createdOn,"MMM dd, yyyy 'at' hh:mm a")," : ",o.commentaire," "),t.xp6(3),t.hij("",o.depense," xpf")}}const Z=[{path:"",component:(()=>{var n;class r{constructor(i,l,f,h){this.depensesservice=i,this.utility=l,this.storageService=f,this.alertController=h,this.depenses=[]}ngOnInit(){this.refresh()}get(){var i=this;return(0,g.Z)(function*(){return yield i.depensesservice.get()})()}refresh(){var i=this;return(0,g.Z)(function*(){const l=yield i.get();i.depenses=l})()}post(){var i=this;return(0,g.Z)(function*(){var f;yield(yield i.alertController.create({cssClass:"my-custom-class",header:"Nouvelle article",inputs:[{type:"number",name:"depense",label:"Montant"},{type:"textarea",name:"commentaire",label:"Nom de l'article"},{type:"checkbox",name:"check",label:"Nom de l'article"}],buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Valider",handler:(f=(0,g.Z)(function*(h){h.id=Date.now(),h.createdOn=new Date,h.check=!1,h.isFirebase=!1,h.firebaseMethod=T.f.POST,h.userid=(yield i.utility.getConnexionInfo()).utilisateurId,yield i.depensesservice.post(h),yield i.refresh()}),function(D){return f.apply(this,arguments)})}]})).present()})()}put(i){var l=this;return(0,g.Z)(function*(){var h;yield(yield l.alertController.create({cssClass:"my-custom-class",header:"Nouvelle article",inputs:[{type:"number",name:"depense",value:i.depense},{type:"textarea",name:"commentaire",value:i.commentaire},{type:"checkbox",name:"check",checked:i.check}],buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Valider",handler:(h=(0,g.Z)(function*(D){D.modifiedOn=new Date,D.userid=(yield l.utility.getConnexionInfo()).utilisateurId,yield l.depensesservice.put(D),yield l.refresh()}),function(P){return h.apply(this,arguments)})}]})).present()})()}delete(i){var l=this;return(0,g.Z)(function*(){yield l.depensesservice.delete(i),l.refresh()})()}handleRefresh(i){this.storageService.synchroniser(p.K.Depenses).then(()=>{this.refresh(),i.target.complete()})}}return(n=r).\u0275fac=function(i){return new(i||n)(t.Y36(b),t.Y36(F.t),t.Y36(I.V),t.Y36(c.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-depenses"]],decls:14,vars:6,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["slot","fixed",3,"pullFactor","pullMin","pullMax","ionRefresh"],[4,"ngFor","ngForOf"],["slot","fixed","horizontal","end","vertical","bottom",3,"click"],["size","small"],["name","add"],["button","","detail","true",3,"disabled","click"],["color","success","slot","end"],["side","start"],[2,"background","rgb(156, 46, 46)",3,"click"]],template:function(i,l){1&i&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"D\xe9penses"),t.qZA()()(),t.TgZ(6,"ion-content",2)(7,"ion-refresher",3),t.NdJ("ionRefresh",function(h){return l.handleRefresh(h)}),t._UZ(8,"ion-refresher-content"),t.qZA(),t.TgZ(9,"ion-list"),t.YNc(10,y,11,7,"ion-item-sliding",4),t.qZA(),t.TgZ(11,"ion-fab",5),t.NdJ("click",function(){return l.post()}),t.TgZ(12,"ion-fab-button",6),t._UZ(13,"ion-icon",7),t.qZA()()()),2&i&&(t.Q6J("translucent",!0),t.xp6(6),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("pullFactor",.5)("pullMin",100)("pullMax",200),t.xp6(3),t.Q6J("ngForOf",l.depenses))},dependencies:[a.sg,c.Sm,c.hM,c.W2,c.IJ,c.W4,c.Gu,c.gu,c.Ie,c.u8,c.IK,c.td,c.Q$,c.q_,c.fG,c.nJ,c.Wo,c.wd,c.sr,a.uU]}),r})()}];let e=(()=>{var n;class r{}return(n=r).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[v.Bz.forChild(Z),v.Bz]}),r})(),s=(()=>{var n;class r{}return(n=r).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.ez,u.u5,c.Pc,e]}),r})()},9825:(M,m,d)=>{d.d(m,{f:()=>a});var a=function(u){return u.POST="POST",u.PUT="PUT",u.DELETE="DELETE",u}(a||{})},5423:(M,m,d)=>{d.d(m,{V:()=>F});var a=d(5861),u=d(3009),c=d(9825),v=d(6689),g=d(2014),p=d(2386),T=d(9392),t=d(3182),I=d(553);let b=(()=>{var y;class x{constructor(e){this.firestore=e}post(e,s,n){return(0,a.Z)(function*(){const r=(0,t.ZF)(I.N.firebaseConfig),o=(0,T.ad)(r);yield(0,p.pl)((0,p.JU)(o,e,n),s)})()}getAll(e){var s=this;return(0,a.Z)(function*(){const n=yield(0,p.hJ)(s.firestore,e);return(0,p.BS)(n)})()}put(e,s,n){var r=this;return(0,a.Z)(function*(){const o=(0,p.JU)(r.firestore,e+"/"+s);return(0,p.r7)(o,n)})()}delete(e,s,n){var r=this;return(0,a.Z)(function*(){const o=(0,p.JU)(r.firestore,e+"/"+s);return(0,p.oe)(o)})()}}return(y=x).\u0275fac=function(e){return new(e||y)(v.LFG(p.gg))},y.\u0275prov=v.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),x})(),F=(()=>{var y;class x{constructor(e,s){this.storage=e,this.firestore=s}postAll(e,s){var n=this;return(0,a.Z)(function*(){(yield n.getConnexionInfo()).isOnline&&(yield(yield s.filter(i=>!i.isFirebase)).map(function(){var i=(0,a.Z)(function*(l){l.isFirebase=!0,yield n.firestore.post(e,l,l.id.toString())});return function(l){return i.apply(this,arguments)}}())),yield n.storage.set(e,s)})()}post(e,s){var n=this;return(0,a.Z)(function*(){var r=yield n.getAll(e);s.id=Number(new Date),s.createdOn=new Date,s.modifiedOn=null,s.deletedOn=null,s.isFirebase=!1,r.push(s),yield n.postAll(e,r)})()}get(e){var s=this;return(0,a.Z)(function*(){return yield(yield s.storage.get(e)).filter(r=>""===r.deletedOn||null===r.deletedOn||void 0!==r.deletedOn)})()}getAll(e){var s=this;return(0,a.Z)(function*(){return yield s.storage.get(e)})()}getIndex(e,s){var n=this;return(0,a.Z)(function*(){return yield(yield n.getAll(e)).findIndex(o=>o.id===s)})()}put(e,s){var n=this;return(0,a.Z)(function*(){const r=yield n.getAll(e),o=yield n.getIndex(e,s.id);r[o]=s,r[o].modifiedOn=new Date,(yield n.getConnexionInfo()).isOnline?yield n.firestore.put(e,s.id.toString(),s):r[o].isFirebase&&(r[o].firebaseMethod=c.f.PUT),yield n.postAll(e,r)})()}delete(e,s){var n=this;return(0,a.Z)(function*(){const r=yield n.getAll(e),o=yield n.getIndex(e,s.id);r[o].deletedOn=new Date,r[o].firebaseMethod=c.f.DELETE,yield n.postAll(e,r),(yield n.getConnexionInfo()).isOnline&&(yield n.firestore.put(e,s.id.toString(),s))})()}deleteDefinitivement(e,s){var n=this;return(0,a.Z)(function*(){const r=yield n.getAll(e),o=yield n.getIndex(e,s.id);(yield n.getConnexionInfo()).isOnline?(r.splice(o,1),yield n.firestore.delete(e,s.id.toString(),s)):r[o].isFirebase?(r[o].firebaseMethod=c.f.DELETE,r[o].deletedOn=new Date):r.splice(o,1),yield n.postAll(e,r)})()}synchroniserAvecFirestore(){var e=this;return(0,a.Z)(function*(){(yield e.getConnexionInfo()).isOnline?(yield e.synchroniser(u.K.Utilisateurs),yield e.synchroniser(u.K.Articles),yield e.synchroniser(u.K.Courses),yield e.synchroniser(u.K.Familles),yield e.synchroniser(u.K.CourseDetails),yield e.synchroniser(u.K.Memos),yield e.synchroniser(u.K.HistoriquePrix),yield e.synchroniser(u.K.Depenses),yield e.synchroniser(u.K.Magasins),yield e.synchroniser(u.K.Plats),yield e.synchroniser(u.K.PlatDetails),yield e.synchroniser(u.K.Groupes),yield e.synchroniser(u.K.Menus)):alert("Le mode onLine est d\xe9sactiv\xe9")})()}synchroniser(e){var s=this;return(0,a.Z)(function*(){if((yield s.getConnexionInfo()).isOnline){const r=yield s.storage.get(e),o=yield r.filter(l=>!l.isFirebase);o.length>0&&o.map(function(){var l=(0,a.Z)(function*(f){f.isFirebase=!0,yield s.firestore.post(e,f,f.id.toString())});return function(f){return l.apply(this,arguments)}}());const i=yield r.filter(l=>l.firebaseMethod===c.f.DELETE||l.firebaseMethod===c.f.PUT);i.length>0&&i.map(function(){var l=(0,a.Z)(function*(f){f.firebaseMethod===c.f.PUT&&(yield s.put(e,f)),f.firebaseMethod===c.f.DELETE&&(yield s.deleteDefinitivement(e,f))});return function(f){return l.apply(this,arguments)}}()),(yield s.firestore.getAll(e)).subscribe(l=>{s.storage.set(e,l)})}else alert("Le mode onLine est d\xe9sactiv\xe9")})()}set(e,s){var n=this;return(0,a.Z)(function*(){yield n.storage.set(e,s)})()}getConnexionInfo(){var e=this;return(0,a.Z)(function*(){return yield e.storage.get(u.K.InfoConnexion)})()}}return(y=x).\u0275fac=function(e){return new(e||y)(v.LFG(g.K),v.LFG(b))},y.\u0275prov=v.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),x})()}}]);