"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8297],{8297:(I,P,a)=>{a.r(P),a.d(P,{PlatsPageModule:()=>k});var y=a(6814),b=a(95),n=a(7027),f=a(9801),c=a(5861),e=a(6689),Z=a(4956),_=a(6199);function C(i,o){if(1&i){const r=e.EpF();e.TgZ(0,"ion-item-sliding")(1,"ion-item",7)(2,"ion-label")(3,"h3"),e._uU(4),e.qZA()()(),e.TgZ(5,"ion-item-options",8)(6,"ion-item-option",9),e.NdJ("click",function(){const s=e.CHM(r).$implicit,u=e.oxw();return e.KtG(u.delete(s))}),e._uU(7," Supprimer "),e.qZA()(),e.TgZ(8,"ion-item-options",10)(9,"ion-item-option",11),e.NdJ("click",function(){const s=e.CHM(r).$implicit,u=e.oxw();return e.KtG(u.postToPanier(s))}),e._uU(10," Envoyer au panier "),e.qZA()()()}if(2&i){const r=o.$implicit;e.xp6(1),e.MGl("routerLink","../plat-details/",r.id,""),e.Q6J("disabled","DELETE"===r.firebaseMethod),e.xp6(3),e.AsE("",r.libelle," - ",r.total," XPF")}}const T=[{path:"",component:(()=>{var i;class o{constructor(t,l,s){this.platservice=t,this.courseservice=l,this.alertController=s,this.plats=[]}ngOnInit(){var t=this;return(0,c.Z)(function*(){yield t.refresh()})()}refresh(){var t=this;return(0,c.Z)(function*(){t.plats=yield t.platservice.get()})()}post(){var t=this;return(0,c.Z)(function*(){var s;yield(yield t.alertController.create({cssClass:"my-custom-class",header:"Cr\xe9er un plat",inputs:[{type:"text",name:"libelle"}],buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Valider",handler:(s=(0,c.Z)(function*(u){const m={id:0,libelle:""==u.libelle?"A d\xe9finir":u.libelle,total:0,createdOn:new Date,isFirebase:!1};yield t.platservice.post(m),yield t.refresh()}),function(m){return s.apply(this,arguments)})}]})).present()})()}delete(t){var l=this;return(0,c.Z)(function*(){yield l.platservice.deleteDefinitivement(t),yield l.refresh()})()}postToPanier(t){var l=this;return(0,c.Z)(function*(){const s=[];var p;(yield l.platservice.getPlatDetails(t.id)).map(p=>{s.push({type:"checkbox",label:p.article.libelle,value:p,checked:!0})}),yield(yield l.alertController.create({cssClass:"my-custom-class",header:"Cr\xe9er un plat",inputs:s,buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Valider",handler:(p=(0,c.Z)(function*(g){if(g.length>0){const h=yield l.courseservice.getCourseIsFocus();yield g.map(function(){var F=(0,c.Z)(function*(d){var x=yield d.article.prix.find(J=>J.magasin===h[0].magasinId),v=void 0===x?d.article.prix[0].prix:x,M={id:0,ordre:0,courseId:h[0].id.toString(),libelle:d.article.libelle,quantite:d.quantite,articleId:d.article.id,prixArticle:Number(v),prixReel:Number(v),total:Number(v)*d.quantite,isFirebase:!1,checked:!1};yield l.courseservice.postCourseDetails(M)});return function(d){return F.apply(this,arguments)}}()),yield l.refresh()}}),function(h){return p.apply(this,arguments)})}]})).present()})()}}return(i=o).\u0275fac=function(t){return new(t||i)(e.Y36(Z.r),e.Y36(_.N),e.Y36(n.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-plats"]],decls:13,vars:3,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],[4,"ngFor","ngForOf"],["slot","fixed","horizontal","end","vertical","bottom"],["size","small",3,"click"],["name","add"],["button","","detail","true",3,"routerLink","disabled"],["side","start"],[2,"background","red",3,"click"],["side","end"],[3,"click"]],template:function(t,l){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Nos plats"),e.qZA()()(),e.TgZ(6,"ion-content",2),e._UZ(7,"br"),e.TgZ(8,"ion-list"),e.YNc(9,C,11,4,"ion-item-sliding",3),e.qZA(),e.TgZ(10,"ion-fab",4)(11,"ion-fab-button",5),e.NdJ("click",function(){return l.post()}),e._UZ(12,"ion-icon",6),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(3),e.Q6J("ngForOf",l.plats))},dependencies:[y.sg,n.Sm,n.W2,n.IJ,n.W4,n.Gu,n.gu,n.Ie,n.u8,n.IK,n.td,n.Q$,n.q_,n.fG,n.wd,n.sr,n.YI,f.rH]}),o})()}];let A=(()=>{var i;class o{}return(i=o).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.Bz.forChild(T),f.Bz]}),o})(),k=(()=>{var i;class o{}return(i=o).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[y.ez,b.u5,n.Pc,A]}),o})()}}]);