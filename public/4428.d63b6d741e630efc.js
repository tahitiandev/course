"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4428],{2957:(z,M,g)=>{g.d(M,{G:()=>L});const L={FRONT:"front",BACK:"back"}},2726:(z,M,g)=>{g.d(M,{Uw:()=>l,fo:()=>K});var i=g(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var I=function(r){return r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE",r}(I||{});class B extends Error{constructor(e,t,a){super(e),this.message=e,this.code=t,this.data=a}}const p=r=>{var e,t,a,d,s;const m=r.CapacitorCustomPlatform||null,c=r.Capacitor||{},C=c.Plugins=c.Plugins||{},P=r.CapacitorPlatforms,H=(null===(e=null==P?void 0:P.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==m?m.name:(r=>{var e,t;return null!=r&&r.androidBridge?"android":null!==(t=null===(e=null==r?void 0:r.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(r)),ce=(null===(t=null==P?void 0:P.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==H()),ue=(null===(a=null==P?void 0:P.currentPlatform)||void 0===a?void 0:a.isPluginAvailable)||(b=>{const E=N.get(b);return!!(null!=E&&E.platforms.has(H())||te(b))}),te=(null===(d=null==P?void 0:P.currentPlatform)||void 0===d?void 0:d.getPluginHeader)||(b=>{var E;return null===(E=c.PluginHeaders)||void 0===E?void 0:E.find(V=>V.name===b)}),N=new Map,ye=(null===(s=null==P?void 0:P.currentPlatform)||void 0===s?void 0:s.registerPlugin)||((b,E={})=>{const V=N.get(b);if(V)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),V.proxy;const j=H(),X=te(b);let $;const me=function(){var w=(0,i.Z)(function*(){return!$&&j in E?$=$="function"==typeof E[j]?yield E[j]():E[j]:null!==m&&!$&&"web"in E&&($=$="function"==typeof E.web?yield E.web():E.web),$});return function(){return w.apply(this,arguments)}}(),q=w=>{let D;const F=(...k)=>{const R=me().then(U=>{const W=((w,D)=>{var F,k;if(!X){if(w)return null===(k=w[D])||void 0===k?void 0:k.bind(w);throw new B(`"${b}" plugin is not implemented on ${j}`,I.Unimplemented)}{const R=null==X?void 0:X.methods.find(U=>D===U.name);if(R)return"promise"===R.rtype?U=>c.nativePromise(b,D.toString(),U):(U,W)=>c.nativeCallback(b,D.toString(),U,W);if(w)return null===(F=w[D])||void 0===F?void 0:F.bind(w)}})(U,w);if(W){const Y=W(...k);return D=null==Y?void 0:Y.remove,Y}throw new B(`"${b}.${w}()" is not implemented on ${j}`,I.Unimplemented)});return"addListener"===w&&(R.remove=(0,i.Z)(function*(){return D()})),R};return F.toString=()=>`${w.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:w,writable:!1,configurable:!1}),F},ne=q("addListener"),re=q("removeListener"),Pe=(w,D)=>{const F=ne({eventName:w},D),k=function(){var U=(0,i.Z)(function*(){const W=yield F;re({eventName:w,callbackId:W},D)});return function(){return U.apply(this,arguments)}}(),R=new Promise(U=>F.then(()=>U({remove:k})));return R.remove=(0,i.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield k()}),R},ee=new Proxy({},{get(w,D){switch(D){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return X?Pe:ne;case"removeListener":return re;default:return q(D)}}});return C[b]=ee,N.set(b,{name:b,proxy:ee,platforms:new Set([...Object.keys(E),...X?[j]:[]])}),ee});return c.convertFileSrc||(c.convertFileSrc=b=>b),c.getPlatform=H,c.handleError=b=>r.console.error(b),c.isNativePlatform=ce,c.isPluginAvailable=ue,c.pluginMethodNoop=(b,E,V)=>Promise.reject(`${V} does not have an implementation of "${E}".`),c.registerPlugin=ye,c.Exception=B,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},A=(r=>r.Capacitor=p(r))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),K=A.registerPlugin;class l{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){var a=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const m=function(){var C=(0,i.Z)(function*(){return a.removeListener(e,t)});return function(){return C.apply(this,arguments)}}(),c=Promise.resolve({remove:m});return Object.defineProperty(c,"remove",{value:(C=(0,i.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield m()}),function(){return C.apply(this,arguments)})}),c;var C}removeAllListeners(){var e=this;return(0,i.Z)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t){const a=this.listeners[e];a&&a.forEach(d=>d(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:a=>{this.notifyListeners(t,a)}}}unimplemented(e="not implemented"){return new A.Exception(e,I.Unimplemented)}unavailable(e="not available"){return new A.Exception(e,I.Unavailable)}removeListener(e,t){var a=this;return(0,i.Z)(function*(){const d=a.listeners[e];if(!d)return;const s=d.indexOf(t);a.listeners[e].splice(s,1),a.listeners[e].length||a.removeWindowListener(a.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const v=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),T=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class O extends l{getCookies(){return(0,i.Z)(function*(){const e=document.cookie,t={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[d,s]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");d=T(d).trim(),s=T(s).trim(),t[d]=s}),t})()}setCookie(e){return(0,i.Z)(function*(){try{const t=v(e.key),a=v(e.value),d=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),m=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${a||""}${d}; path=${s}; ${m};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,i.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,i.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,i.Z)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}K("CapacitorCookies",{web:()=>new O});const ie=function(){var r=(0,i.Z)(function*(e){return new Promise((t,a)=>{const d=new FileReader;d.onload=()=>{const s=d.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},d.onerror=s=>a(s),d.readAsDataURL(e)})});return function(t){return r.apply(this,arguments)}}();class le extends l{request(e){return(0,i.Z)(function*(){const t=((r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),d=((r={})=>{const e=Object.keys(r);return Object.keys(r).map(d=>d.toLocaleLowerCase()).reduce((d,s,m)=>(d[s]=r[e[m]],d),{})})(r.headers)["content-type"]||"";if("string"==typeof r.data)t.body=r.data;else if(d.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[m,c]of Object.entries(r.data||{}))s.set(m,c);t.body=s.toString()}else if(d.includes("multipart/form-data")){const s=new FormData;if(r.data instanceof FormData)r.data.forEach((c,C)=>{s.append(C,c)});else for(const c of Object.keys(r.data))s.append(c,r.data[c]);t.body=s;const m=new Headers(t.headers);m.delete("content-type"),t.headers=m}else(d.includes("application/json")||"object"==typeof r.data)&&(t.body=JSON.stringify(r.data));return t})(e,e.webFetchExtra),a=((r,e=!0)=>r?Object.entries(r).reduce((a,d)=>{const[s,m]=d;let c,C;return Array.isArray(m)?(C="",m.forEach(P=>{c=e?encodeURIComponent(P):P,C+=`${s}=${c}&`}),C.slice(0,-1)):(c=e?encodeURIComponent(m):m,C=`${s}=${c}`),`${a}&${C}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),d=a?`${e.url}?${a}`:e.url,s=yield fetch(d,t),m=s.headers.get("content-type")||"";let C,P,{responseType:c="text"}=s.ok?e:{};switch(m.includes("application/json")&&(c="json"),c){case"arraybuffer":case"blob":P=yield s.blob(),C=yield ie(P);break;case"json":C=yield s.json();break;default:C=yield s.text()}const J={};return s.headers.forEach((H,Q)=>{J[Q]=H}),{data:C,headers:J,status:s.status,url:s.url}})()}get(e){var t=this;return(0,i.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,i.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,i.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,i.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,i.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}K("CapacitorHttp",{web:()=>new le})},5512:(z,M,g)=>{g.d(M,{J:()=>x});var i=g(5861),h=g(3009),L=g(6689),S=g(849),G=g(6815);let x=(()=>{var _;class I{constructor(u,p){this.storage=u,this.utility=p}get(){var u=this;return(0,i.Z)(function*(){return u.orderByFamille(yield u.storage.get(h.K.Articles))})()}post(u){var p=this;return(0,i.Z)(function*(){yield p.storage.post(h.K.Articles,u)})()}put(u){var p=this;return(0,i.Z)(function*(){yield p.storage.put(h.K.Articles,u)})()}delete(u){var p=this;return(0,i.Z)(function*(){yield p.storage.delete(h.K.Articles,u)})()}deleteDefinitivement(u){var p=this;return(0,i.Z)(function*(){yield p.storage.deleteDefinitivement(h.K.Articles,u)})()}getArticleById(u){var p=this;return(0,i.Z)(function*(){return(yield p.get()).filter(A=>A.id==u)})()}getArticleByCodeBarre(u){var p=this;return(0,i.Z)(function*(){return(yield p.get()).filter(A=>A.codeBarre==u)})()}orderByFamille(u){return u.sort((p,y)=>p.familleId<y.familleId?-1:1)}}return(_=I).\u0275fac=function(u){return new(u||_)(L.LFG(S.V),L.LFG(G.t))},_.\u0275prov=L.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),I})()},1934:(z,M,g)=>{g.d(M,{k:()=>x});var i=g(5861),h=g(2726);g(2957);const S=(0,h.fo)("BarcodeScanner",{web:()=>g.e(7606).then(g.bind(g,7606)).then(_=>new _.BarcodeScannerWeb)});var G=g(6689);let x=(()=>{var _;class I{constructor(){}checkPermission(){return(0,i.Z)(function*(){try{return!!(yield S.checkPermission({force:!0})).granted}catch(u){return u}})()}STEP1EnableCameraReturnVisility(){var u=this;return(0,i.Z)(function*(){var p;return(yield u.checkPermission())?(yield S.hideBackground(),null===(p=document.querySelector("body"))||void 0===p||p.classList.add("scanner-active"),"hidden"):""})()}STEP2ScanneBarCodeAndReturnContent(){return(0,i.Z)(function*(){return(yield S.startScan()).content})()}STEP3disableCameraReturnVisility(){var u;return S.showBackground(),S.stopScan(),null===(u=document.querySelector("body"))||void 0===u||u.classList.remove("scanner-active"),""}}return(_=I).\u0275fac=function(u){return new(u||_)},_.\u0275prov=G.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),I})()},849:(z,M,g)=>{g.d(M,{V:()=>p});var i=g(5861),h=g(3009),L=function(y){return y.POST="POST",y.PUT="PUT",y.DELETE="DELETE",y}(L||{}),S=g(6689),G=g(2014),x=g(2386),_=g(9392),I=g(3182),B=g(553);let u=(()=>{var y;class A{constructor(n){this.firestore=n}post(n,o,l){return(0,i.Z)(function*(){const f=(0,I.ZF)(B.N.firebaseConfig),v=(0,_.ad)(f);yield(0,x.pl)((0,x.JU)(v,n,l),o)})()}getAll(n){var o=this;return(0,i.Z)(function*(){const l=yield(0,x.hJ)(o.firestore,n);return(0,x.BS)(l)})()}put(n,o,l){var f=this;return(0,i.Z)(function*(){const v=(0,x.JU)(f.firestore,n+"/"+o);return(0,x.r7)(v,l)})()}delete(n,o,l){var f=this;return(0,i.Z)(function*(){const v=(0,x.JU)(f.firestore,n+"/"+o);return(0,x.oe)(v)})()}}return(y=A).\u0275fac=function(n){return new(n||y)(S.LFG(x.gg))},y.\u0275prov=S.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),A})(),p=(()=>{var y;class A{constructor(n,o){this.storage=n,this.firestore=o}postAll(n,o){var l=this;return(0,i.Z)(function*(){(yield l.getConnexionInfo()).isOnline&&(yield(yield o.filter(T=>!T.isFirebase)).map(function(){var T=(0,i.Z)(function*(O){O.isFirebase=!0,yield l.firestore.post(n,O,O.id.toString())});return function(O){return T.apply(this,arguments)}}())),yield l.storage.set(n,o)})()}post(n,o){var l=this;return(0,i.Z)(function*(){var f=yield l.getAll(n);o.id=Number(new Date),o.createdOn=new Date,o.modifiedOn=null,o.deletedOn=null,o.isFirebase=!1,f.push(o),yield l.postAll(n,f)})()}get(n){var o=this;return(0,i.Z)(function*(){return yield(yield o.storage.get(n)).filter(f=>""===f.deletedOn||null===f.deletedOn||void 0!==f.deletedOn)})()}getAll(n){var o=this;return(0,i.Z)(function*(){return yield o.storage.get(n)})()}getIndex(n,o){var l=this;return(0,i.Z)(function*(){return yield(yield l.getAll(n)).findIndex(v=>v.id===o)})()}put(n,o){var l=this;return(0,i.Z)(function*(){const f=yield l.getAll(n),v=yield l.getIndex(n,o.id);f[v]=o,f[v].modifiedOn=new Date,(yield l.getConnexionInfo()).isOnline?yield l.firestore.put(n,o.id.toString(),o):f[v].isFirebase&&(f[v].firebaseMethod=L.PUT),yield l.postAll(n,f)})()}delete(n,o){var l=this;return(0,i.Z)(function*(){const f=yield l.getAll(n),v=yield l.getIndex(n,o.id);f[v].deletedOn=new Date,f[v].firebaseMethod=L.DELETE,yield l.postAll(n,f),(yield l.getConnexionInfo()).isOnline&&(yield l.firestore.put(n,o.id.toString(),o))})()}deleteDefinitivement(n,o){var l=this;return(0,i.Z)(function*(){const f=yield l.getAll(n),v=yield l.getIndex(n,o.id);(yield l.getConnexionInfo()).isOnline?(f.splice(v,1),yield l.firestore.delete(n,o.id.toString(),o)):f[v].isFirebase?(f[v].firebaseMethod=L.DELETE,f[v].deletedOn=new Date):f.splice(v,1),yield l.postAll(n,f)})()}synchroniserAvecFirestore(){var n=this;return(0,i.Z)(function*(){(yield n.getConnexionInfo()).isOnline?(yield n.synchroniser(h.K.Utilisateurs),yield n.synchroniser(h.K.Articles),yield n.synchroniser(h.K.Courses),yield n.synchroniser(h.K.Familles),yield n.synchroniser(h.K.CourseDetails),yield n.synchroniser(h.K.Memos),yield n.synchroniser(h.K.HistoriquePrix),yield n.synchroniser(h.K.Magasins),yield n.synchroniser(h.K.Plats),yield n.synchroniser(h.K.PlatDetails),yield n.synchroniser(h.K.Groupes),yield n.synchroniser(h.K.Menus)):alert("Le mode onLine est d\xe9sactiv\xe9")})()}synchroniser(n){var o=this;return(0,i.Z)(function*(){if((yield o.getConnexionInfo()).isOnline){const f=yield o.storage.get(n),v=yield f.filter(O=>!O.isFirebase);v.length>0&&v.map(function(){var O=(0,i.Z)(function*(Z){Z.isFirebase=!0,yield o.firestore.post(n,Z,Z.id.toString())});return function(Z){return O.apply(this,arguments)}}());const T=yield f.filter(O=>O.firebaseMethod===L.DELETE||O.firebaseMethod===L.PUT);T.length>0&&T.map(function(){var O=(0,i.Z)(function*(Z){Z.firebaseMethod===L.PUT&&(yield o.put(n,Z)),Z.firebaseMethod===L.DELETE&&(yield o.deleteDefinitivement(n,Z))});return function(Z){return O.apply(this,arguments)}}()),(yield o.firestore.getAll(n)).subscribe(O=>{o.storage.set(n,O)})}else alert("Le mode onLine est d\xe9sactiv\xe9")})()}set(n,o){var l=this;return(0,i.Z)(function*(){yield l.storage.set(n,o)})()}getConnexionInfo(){var n=this;return(0,i.Z)(function*(){return yield n.storage.get(h.K.InfoConnexion)})()}}return(y=A).\u0275fac=function(n){return new(n||y)(S.LFG(G.K),S.LFG(u))},y.\u0275prov=S.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),A})()}}]);