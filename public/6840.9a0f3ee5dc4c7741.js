"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6840],{6840:(I,v,a)=>{a.r(v),a.d(v,{SettingsPageModule:()=>i});var u=a(6814),g=a(95),c=a(7027),p=a(9801),h=a(5861),y=a(3009),e=a(6689),S=a(6815),C=a(5423),_=a(202);function P(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const s=e.oxw();e.xp6(1),e.hij("",s.magasinParDefaut," est actuellement le magasin par d\xe9faut")}}const m=[{path:"",component:(()=>{var n;class o{constructor(t,l,r,d){this.alertController=t,this.utility=l,this.storage=r,this.magasinService=d,this.magasinParDefaut="",this.isOnline=!0,this.isCourseRapide=!0}ngOnInit(){var t=this;return(0,h.Z)(function*(){yield t.refresh()})()}refresh(){var t=this;return(0,h.Z)(function*(){var l;const r=yield t.utility.getConnexionInfo();t.connexionInfo=r,t.isOnline=r.isOnline,t.isCourseRapide=r.isCourseRapide,t.magasinParDefaut=void 0===(null===(l=r.magasinParDefaut)||void 0===l?void 0:l.libelle)?"1":r.magasinParDefaut.libelle})()}setmagasinParDefaut(){var t=this;return(0,h.Z)(function*(){const l=yield t.magasinService.get(),r=[];var Z;l.map(Z=>{r.push({type:"radio",label:Z.libelle,value:Z,checked:t.magasinParDefaut===Z.libelle})}),yield(yield t.alertController.create({cssClass:"my-custom-class",header:"Magasin par d\xe9faut",inputs:r,buttons:[{text:"Annuler",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Valider",handler:(Z=(0,h.Z)(function*(x){const A=yield t.utility.getConnexionInfo();A.magasinParDefaut=x,t.magasinParDefaut=x.libelle,yield t.storage.set(y.K.InfoConnexion,A)}),function(A){return Z.apply(this,arguments)})}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})()}synchroniser(){var t=this;return(0,h.Z)(function*(){yield t.storage.synchroniserAvecFirestore().then((0,h.Z)(function*(){yield t.utility.popUp("Synchronisation termin\xe9e")}))})()}setModeOnline(t){var l=this;return(0,h.Z)(function*(){const r=t.detail.checked,d=yield l.utility.getConnexionInfo();d.isOnline=r,yield l.utility.putConnexionInfo(d),yield l.refresh()})()}setModeCourseRapide(t){var l=this;return(0,h.Z)(function*(){const r=t.detail.checked,d=yield l.utility.getConnexionInfo();d.isCourseRapide=r,yield l.utility.putConnexionInfo(d),yield l.refresh()})()}consoleLog(t){var l=this;return(0,h.Z)(function*(){const r=yield l.storage.get(t);console.log(r)})()}}return(n=o).\u0275fac=function(t){return new(t||n)(e.Y36(c.Br),e.Y36(S.t),e.Y36(C.V),e.Y36(_.t))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-settings"]],decls:82,vars:5,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["button","","detail","true",3,"click"],[3,"checked","ionChange"],[4,"ngIf"],["button","","detail","true","routerLink","/historique-prix"],["button","","detail","true","routerLink","/utilisateur-liste"],["button","","detail","true","routerLink","/utilisateur-groupes"]],template:function(t,l){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Param\xe8tres g\xe9n\xe9raux"),e.qZA()()(),e.TgZ(6,"ion-content",2)(7,"ion-item-group")(8,"ion-item-divider")(9,"ion-label"),e._uU(10,"Synchronisation"),e.qZA()(),e.TgZ(11,"ion-item",3),e.NdJ("click",function(){return l.synchroniser()}),e.TgZ(12,"ion-label")(13,"h3"),e._uU(14,"Synchroniser avec firebase"),e.qZA()()(),e.TgZ(15,"ion-item")(16,"ion-toggle",4),e.NdJ("ionChange",function(d){return l.setModeOnline(d)}),e._uU(17,"Mode Online"),e.qZA()()(),e.TgZ(18,"ion-item-group")(19,"ion-item-divider")(20,"ion-label"),e._uU(21,"G\xe9n\xe9ral"),e.qZA()(),e.TgZ(22,"ion-item",3),e.NdJ("click",function(){return l.setmagasinParDefaut()}),e.TgZ(23,"ion-label")(24,"h3"),e._uU(25,"Magasin par d\xe9faut"),e.qZA(),e.YNc(26,P,2,1,"p",5),e.qZA()(),e.TgZ(27,"ion-item")(28,"ion-toggle",4),e.NdJ("ionChange",function(d){return l.setModeCourseRapide(d)}),e._uU(29,"Mode course rapide"),e.qZA()()(),e.TgZ(30,"ion-item-group")(31,"ion-item-divider")(32,"ion-label"),e._uU(33,"Statistiques"),e.qZA()(),e.TgZ(34,"ion-item",6)(35,"ion-label")(36,"h3"),e._uU(37,"Historique des prix"),e.qZA()()()(),e.TgZ(38,"ion-item-group")(39,"ion-item-divider")(40,"ion-label"),e._uU(41,"S\xe9curit\xe9"),e.qZA()(),e.TgZ(42,"ion-item",7)(43,"ion-label")(44,"h3"),e._uU(45,"Utilisateurs"),e.qZA()()(),e.TgZ(46,"ion-item",8)(47,"ion-label")(48,"h3"),e._uU(49,"Groupes"),e.qZA()()()(),e.TgZ(50,"ion-item-group")(51,"ion-item-divider")(52,"ion-label"),e._uU(53,"Console.log"),e.qZA()(),e.TgZ(54,"ion-item",3),e.NdJ("click",function(){return l.consoleLog("Courses")}),e.TgZ(55,"ion-label")(56,"h3"),e._uU(57,"Console.log : Course"),e.qZA()()(),e.TgZ(58,"ion-item",3),e.NdJ("click",function(){return l.consoleLog("CourseDetails")}),e.TgZ(59,"ion-label")(60,"h3"),e._uU(61,"Console.log : CourseDetails"),e.qZA()()(),e.TgZ(62,"ion-item",3),e.NdJ("click",function(){return l.consoleLog("Utilisateurs")}),e.TgZ(63,"ion-label")(64,"h3"),e._uU(65,"Console.log : Utilisateurs"),e.qZA()()(),e.TgZ(66,"ion-item",3),e.NdJ("click",function(){return l.consoleLog("Groupes")}),e.TgZ(67,"ion-label")(68,"h3"),e._uU(69,"Console.log : Groupes"),e.qZA()()(),e.TgZ(70,"ion-item",3),e.NdJ("click",function(){return l.consoleLog("Articles")}),e.TgZ(71,"ion-label")(72,"h3"),e._uU(73,"Console.log : Articles"),e.qZA()()(),e.TgZ(74,"ion-item",3),e.NdJ("click",function(){return l.consoleLog("Magasins")}),e.TgZ(75,"ion-label")(76,"h3"),e._uU(77,"Console.log : Magasins"),e.qZA()()(),e.TgZ(78,"ion-item",3),e.NdJ("click",function(){return l.consoleLog("Plats")}),e.TgZ(79,"ion-label")(80,"h3"),e._uU(81,"Console.log : Plats"),e.qZA()()()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("checked",l.isOnline),e.xp6(10),e.Q6J("ngIf",""!==l.magasinParDefaut),e.xp6(2),e.Q6J("checked",l.isCourseRapide))},dependencies:[u.O5,c.Sm,c.W2,c.Gu,c.Ie,c.rH,c.Ub,c.Q$,c.fG,c.wd,c.ho,c.sr,c.w,c.YI,p.rH]}),o})()}];let T=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(m),p.Bz]}),o})(),i=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,g.u5,c.Pc,T]}),o})()},9825:(I,v,a)=>{a.d(v,{f:()=>u});var u=function(g){return g.POST="POST",g.PUT="PUT",g.DELETE="DELETE",g}(u||{})},5423:(I,v,a)=>{a.d(v,{V:()=>P});var u=a(5861),g=a(3009),c=a(9825),p=a(6689),h=a(2014),y=a(2386),e=a(9392),S=a(3182),C=a(553);let _=(()=>{var f;class m{constructor(i){this.firestore=i}post(i,n,o){return(0,u.Z)(function*(){const s=(0,S.ZF)(C.N.firebaseConfig),t=(0,e.ad)(s);yield(0,y.pl)((0,y.JU)(t,i,o),n)})()}getAll(i){var n=this;return(0,u.Z)(function*(){const o=yield(0,y.hJ)(n.firestore,i);return(0,y.BS)(o)})()}put(i,n,o){var s=this;return(0,u.Z)(function*(){const t=(0,y.JU)(s.firestore,i+"/"+n);return(0,y.r7)(t,o)})()}delete(i,n,o){var s=this;return(0,u.Z)(function*(){const t=(0,y.JU)(s.firestore,i+"/"+n);return(0,y.oe)(t)})()}}return(f=m).\u0275fac=function(i){return new(i||f)(p.LFG(y.gg))},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),m})(),P=(()=>{var f;class m{constructor(i,n){this.storage=i,this.firestore=n}postAll(i,n){var o=this;return(0,u.Z)(function*(){(yield o.getConnexionInfo()).isOnline&&(yield(yield n.filter(l=>!l.isFirebase)).map(function(){var l=(0,u.Z)(function*(r){r.isFirebase=!0,yield o.firestore.post(i,r,r.id.toString())});return function(r){return l.apply(this,arguments)}}())),yield o.storage.set(i,n)})()}post(i,n){var o=this;return(0,u.Z)(function*(){var s=yield o.getAll(i);n.id=Number(new Date),n.createdOn=new Date,n.modifiedOn=null,n.deletedOn=null,n.isFirebase=!1,s.push(n),yield o.postAll(i,s)})()}get(i){var n=this;return(0,u.Z)(function*(){return yield(yield n.storage.get(i)).filter(s=>""===s.deletedOn||null===s.deletedOn||void 0!==s.deletedOn)})()}getAll(i){var n=this;return(0,u.Z)(function*(){return yield n.storage.get(i)})()}getIndex(i,n){var o=this;return(0,u.Z)(function*(){return yield(yield o.getAll(i)).findIndex(t=>t.id===n)})()}put(i,n){var o=this;return(0,u.Z)(function*(){const s=yield o.getAll(i),t=yield o.getIndex(i,n.id);s[t]=n,s[t].modifiedOn=new Date,(yield o.getConnexionInfo()).isOnline?yield o.firestore.put(i,n.id.toString(),n):s[t].isFirebase&&(s[t].firebaseMethod=c.f.PUT),yield o.postAll(i,s)})()}delete(i,n){var o=this;return(0,u.Z)(function*(){const s=yield o.getAll(i),t=yield o.getIndex(i,n.id);s[t].deletedOn=new Date,s[t].firebaseMethod=c.f.DELETE,yield o.postAll(i,s),(yield o.getConnexionInfo()).isOnline&&(yield o.firestore.put(i,n.id.toString(),n))})()}deleteDefinitivement(i,n){var o=this;return(0,u.Z)(function*(){const s=yield o.getAll(i),t=yield o.getIndex(i,n.id);(yield o.getConnexionInfo()).isOnline?(s.splice(t,1),yield o.firestore.delete(i,n.id.toString(),n)):s[t].isFirebase?(s[t].firebaseMethod=c.f.DELETE,s[t].deletedOn=new Date):s.splice(t,1),yield o.postAll(i,s)})()}synchroniserAvecFirestore(){var i=this;return(0,u.Z)(function*(){(yield i.getConnexionInfo()).isOnline?(yield i.synchroniser(g.K.Utilisateurs),yield i.synchroniser(g.K.Articles),yield i.synchroniser(g.K.Courses),yield i.synchroniser(g.K.Familles),yield i.synchroniser(g.K.CourseDetails),yield i.synchroniser(g.K.Memos),yield i.synchroniser(g.K.HistoriquePrix),yield i.synchroniser(g.K.Depenses),yield i.synchroniser(g.K.Magasins),yield i.synchroniser(g.K.Plats),yield i.synchroniser(g.K.PlatDetails),yield i.synchroniser(g.K.Groupes),yield i.synchroniser(g.K.Menus)):alert("Le mode onLine est d\xe9sactiv\xe9")})()}synchroniser(i){var n=this;return(0,u.Z)(function*(){if((yield n.getConnexionInfo()).isOnline){const s=yield n.storage.get(i),t=yield s.filter(r=>!r.isFirebase);t.length>0&&t.map(function(){var r=(0,u.Z)(function*(d){d.isFirebase=!0,yield n.firestore.post(i,d,d.id.toString())});return function(d){return r.apply(this,arguments)}}());const l=yield s.filter(r=>r.firebaseMethod===c.f.DELETE||r.firebaseMethod===c.f.PUT);l.length>0&&l.map(function(){var r=(0,u.Z)(function*(d){d.firebaseMethod===c.f.PUT&&(yield n.put(i,d)),d.firebaseMethod===c.f.DELETE&&(yield n.deleteDefinitivement(i,d))});return function(d){return r.apply(this,arguments)}}()),(yield n.firestore.getAll(i)).subscribe(r=>{n.storage.set(i,r)})}else alert("Le mode onLine est d\xe9sactiv\xe9")})()}set(i,n){var o=this;return(0,u.Z)(function*(){yield o.storage.set(i,n)})()}getConnexionInfo(){var i=this;return(0,u.Z)(function*(){return yield i.storage.get(g.K.InfoConnexion)})()}}return(f=m).\u0275fac=function(i){return new(i||f)(p.LFG(h.K),p.LFG(_))},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),m})()}}]);