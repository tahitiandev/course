"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[899],{9825:(x,y,u)=>{u.d(y,{f:()=>l});var l=function(s){return s.POST="POST",s.PUT="PUT",s.DELETE="DELETE",s}(l||{})},9739:(x,y,u)=>{u.r(y),u.d(y,{UtilisateursPageModule:()=>v});var l=u(6814),s=u(95),a=u(7027),p=u(9801),m=u(5861),t=u(6689),Z=u(6815),U=u(4265),I=u(4073);function b(e,i){if(1&e&&(t.TgZ(0,"ion-select",11)(1,"ion-select-option",12),t._uU(2),t.qZA()()),2&e){const r=i.$implicit;t.xp6(1),t.s9C("value",r.id),t.xp6(1),t.Oqu(r.libelle)}}const c=[{path:"",component:(()=>{var e;class i{constructor(n,o,f,d,g){this.formbuilder=n,this.utility=o,this.navigate=f,this.groupes=d,this.utilisateurService=g,this.createUserForm=new s.cw([]),this.utilisateurGroupes=[],this.refresh()}ngOnInit(){this.createUserFormInit(),this.refresh()}refresh(){var n=this;return(0,m.Z)(function*(){n.utilisateurGroupes=yield n.getGroupe()})()}createUserFormInit(){this.createUserForm=this.formbuilder.group({id:0,libelle:"",username:"",password:"",email:"",groupeId:0,actif:!0})}onValide(){var n=this;return(0,m.Z)(function*(){const o=n.createUserForm.value;o.groupeId=Number(o.groupeId),yield n.utilisateurService.post(o),n.createUserForm.patchValue({id:new Date,libelle:"",username:"",password:"",email:"",groupeId:0,actif:!0}),n.utility.navigateTo("authentification")})()}navigateToAuthentification(){this.utility.navigateTo("authentification")}getGroupe(){var n=this;return(0,m.Z)(function*(){return(yield yield n.groupes.get()).filter(f=>0!==f.id)})()}}return(e=i).\u0275fac=function(n){return new(n||e)(t.Y36(s.qu),t.Y36(Z.t),t.Y36(a.SH),t.Y36(U.j),t.Y36(I.X))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-utilisateurs"]],decls:29,vars:4,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],[3,"formGroup","ngSubmit"],["formControlName","libelle","label","Votre nom et pr\xe9nom","label-placement","floating","fill","outline","placeholder","Votre nom et pr\xe9nom"],["formControlName","username","label","Votre login","label-placement","floating","fill","outline","placeholder","Votre login"],["formControlName","password","label","Votre mot de passe","type","password","label-placement","floating","fill","outline","placeholder","Votre mot de passe"],["formControlName","email","label","Votre email","type","email","label-placement","floating","fill","outline","placeholder","Votre email"],["formControlName","groupeId","aria-label","Famille","placeholder","S\xe9lectionner votre famille",4,"ngFor","ngForOf"],["type","submit","expand","full"],[2,"cursor","pointer",3,"click"],["formControlName","groupeId","aria-label","Famille","placeholder","S\xe9lectionner votre famille"],[3,"value"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Cr\xe9ation d'un utilisateur"),t.qZA()()(),t.TgZ(6,"ion-content",2)(7,"form",3),t.NdJ("ngSubmit",function(){return o.onValide()}),t.TgZ(8,"ion-list"),t._UZ(9,"br"),t.TgZ(10,"ion-list")(11,"ion-item"),t._UZ(12,"ion-input",4),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"ion-item"),t._UZ(15,"ion-input",5),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"ion-item"),t._UZ(18,"ion-input",6),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"ion-item"),t._UZ(21,"ion-input",7),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"ion-item"),t.YNc(24,b,3,2,"ion-select",8),t.qZA()()(),t.TgZ(25,"ion-button",9),t._uU(26,"VALIDER"),t.qZA()(),t.TgZ(27,"p",10),t.NdJ("click",function(){return o.navigateToAuthentification()}),t._uU(28,"Se connecter"),t.qZA()()),2&n&&(t.Q6J("translucent",!0),t.xp6(6),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("formGroup",o.createUserForm),t.xp6(17),t.Q6J("ngForOf",o.utilisateurGroupes))},dependencies:[l.sg,s._Y,s.JJ,s.JL,a.YG,a.Sm,a.W2,a.Gu,a.pK,a.Ie,a.q_,a.fG,a.t9,a.n0,a.wd,a.sr,a.QI,a.j9,s.sg,s.u]}),i})()}];let h=(()=>{var e;class i{}return(e=i).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(c),p.Bz]}),i})(),v=(()=>{var e;class i{}return(e=i).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,s.u5,a.Pc,h,s.u5,s.UX]}),i})()},5423:(x,y,u)=>{u.d(y,{V:()=>T});var l=u(5861),s=u(3009),a=u(9825),p=u(6689),m=u(2014),t=u(2386),Z=u(9392),U=u(3182),I=u(553);let b=(()=>{var c;class h{constructor(e){this.firestore=e}post(e,i,r){return(0,l.Z)(function*(){const n=(0,U.ZF)(I.N.firebaseConfig),o=(0,Z.ad)(n);yield(0,t.pl)((0,t.JU)(o,e,r),i)})()}getAll(e){var i=this;return(0,l.Z)(function*(){const r=yield(0,t.hJ)(i.firestore,e);return(0,t.BS)(r)})()}put(e,i,r){var n=this;return(0,l.Z)(function*(){const o=(0,t.JU)(n.firestore,e+"/"+i);return(0,t.r7)(o,r)})()}delete(e,i,r){var n=this;return(0,l.Z)(function*(){const o=(0,t.JU)(n.firestore,e+"/"+i);return(0,t.oe)(o)})()}}return(c=h).\u0275fac=function(e){return new(e||c)(p.LFG(t.gg))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),h})(),T=(()=>{var c;class h{constructor(e,i){this.storage=e,this.firestore=i}postAll(e,i){var r=this;return(0,l.Z)(function*(){(yield r.getConnexionInfo()).isOnline&&(yield(yield i.filter(f=>!f.isFirebase)).map(function(){var f=(0,l.Z)(function*(d){d.isFirebase=!0,yield r.firestore.post(e,d,d.id.toString())});return function(d){return f.apply(this,arguments)}}())),yield r.storage.set(e,i)})()}post(e,i){var r=this;return(0,l.Z)(function*(){var n=yield r.getAll(e);i.id=Number(new Date),i.createdOn=new Date,i.modifiedOn=null,i.deletedOn=null,i.isFirebase=!1,n.push(i),yield r.postAll(e,n)})()}get(e){var i=this;return(0,l.Z)(function*(){return yield(yield i.storage.get(e)).filter(n=>""===n.deletedOn||null===n.deletedOn||void 0!==n.deletedOn)})()}getAll(e){var i=this;return(0,l.Z)(function*(){return yield i.storage.get(e)})()}getIndex(e,i){var r=this;return(0,l.Z)(function*(){return yield(yield r.getAll(e)).findIndex(o=>o.id===i)})()}put(e,i){var r=this;return(0,l.Z)(function*(){const n=yield r.getAll(e),o=yield r.getIndex(e,i.id);n[o]=i,n[o].modifiedOn=new Date,(yield r.getConnexionInfo()).isOnline?yield r.firestore.put(e,i.id.toString(),i):n[o].isFirebase&&(n[o].firebaseMethod=a.f.PUT),yield r.postAll(e,n)})()}delete(e,i){var r=this;return(0,l.Z)(function*(){const n=yield r.getAll(e),o=yield r.getIndex(e,i.id);n[o].deletedOn=new Date,n[o].firebaseMethod=a.f.DELETE,yield r.postAll(e,n),(yield r.getConnexionInfo()).isOnline&&(yield r.firestore.put(e,i.id.toString(),i))})()}deleteDefinitivement(e,i){var r=this;return(0,l.Z)(function*(){const n=yield r.getAll(e),o=yield r.getIndex(e,i.id);(yield r.getConnexionInfo()).isOnline?(n.splice(o,1),yield r.firestore.delete(e,i.id.toString(),i)):n[o].isFirebase?(n[o].firebaseMethod=a.f.DELETE,n[o].deletedOn=new Date):n.splice(o,1),yield r.postAll(e,n)})()}synchroniserAvecFirestore(){var e=this;return(0,l.Z)(function*(){(yield e.getConnexionInfo()).isOnline?(yield e.synchroniser(s.K.Utilisateurs),yield e.synchroniser(s.K.Articles),yield e.synchroniser(s.K.Courses),yield e.synchroniser(s.K.Familles),yield e.synchroniser(s.K.CourseDetails),yield e.synchroniser(s.K.Memos),yield e.synchroniser(s.K.HistoriquePrix),yield e.synchroniser(s.K.Depenses),yield e.synchroniser(s.K.Apports),yield e.synchroniser(s.K.Epargnes),yield e.synchroniser(s.K.Magasins),yield e.synchroniser(s.K.Plats),yield e.synchroniser(s.K.PlatDetails),yield e.synchroniser(s.K.Groupes),yield e.synchroniser(s.K.Menus)):alert("Le mode onLine est d\xe9sactiv\xe9")})()}synchroniser(e){var i=this;return(0,l.Z)(function*(){if((yield i.getConnexionInfo()).isOnline){const n=yield i.storage.get(e),o=yield n.filter(d=>!d.isFirebase);o.length>0&&o.map(function(){var d=(0,l.Z)(function*(g){g.isFirebase=!0,yield i.firestore.post(e,g,g.id.toString())});return function(g){return d.apply(this,arguments)}}());const f=yield n.filter(d=>d.firebaseMethod===a.f.DELETE||d.firebaseMethod===a.f.PUT);f.length>0&&f.map(function(){var d=(0,l.Z)(function*(g){g.firebaseMethod===a.f.PUT&&(yield i.put(e,g)),g.firebaseMethod===a.f.DELETE&&(yield i.deleteDefinitivement(e,g))});return function(g){return d.apply(this,arguments)}}()),(yield i.firestore.getAll(e)).subscribe(d=>{i.storage.set(e,d)})}else alert("Le mode onLine est d\xe9sactiv\xe9")})()}set(e,i){var r=this;return(0,l.Z)(function*(){yield r.storage.set(e,i)})()}getConnexionInfo(){var e=this;return(0,l.Z)(function*(){return yield e.storage.get(s.K.InfoConnexion)})()}}return(c=h).\u0275fac=function(e){return new(e||c)(p.LFG(m.K),p.LFG(b))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),h})()}}]);